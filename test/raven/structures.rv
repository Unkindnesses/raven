xs = list(widen(1), widen(2), widen(3))
println(sum(xs) == 6)

ys = [4, widen(5)]
println((part(ys, widen(1)) + part(ys, widen(2))) == 4+5)

fn range(n) {
  xs = []
  i = 1
  while (i <= n) {
    push(&xs, i)
    i = i + 1
  }
  return xs
}

# TODO let
fn testRange() {
  xs = range(10)
  println(nparts(xs) == 10)
  println(part(xs, 1) == 1)
  println(part(xs, 10) == 10)
  println(part(xs, widen(5)) == 5)
}

testRange()

fn rangeReverse(n) {
  xs = []
  i = 1
  while (i <= n) {
    xs = [i, xs...]
    i = i + 1
  }
  return xs
}

fn testRangeReverse() {
  xs = rangeReverse(10)
  println(nparts(xs) == 10)
  println(part(xs, 1) == 10)
  println(part(xs, 10) == 1)
  println(part(xs, widen(5)) == 6)
}

testRangeReverse()

println(allocationCount() == 0)
