fn relu(x) {
  if x > 0 {
    x
  } else {
    0
  }
}

println(relu(widen(5)) == 5)
println(relu(widen(-5)) == 0)

fn fib1(n) {
  if (n <= 1) {
    return n
  } else {
    return fib1(n-1) + fib1(n-2)
  }
}

println(fib1(20) == 6765)

fn fib2(n) { fib2(n-1) + fib2(n-2) }
fn fib2(0) { 0 }
fn fib2(1) { 1 }

println(fib2(widen(20)) == 6765)

# Return-value casting
fn test(c) {
  if c {
    return "true"
  } else {
    return "false"
  }
}

println(test(widen(true)) == "true")
println(test(widen(true)) != "false")
println(test(widen(false)) == "false")

println(tag"foo" == tag"foo")
println(tag"foo" != tag"bar")

{
  x = if widen(true) { tag"foo" } else { tag"bar" }
  println(x == tag"foo")
  println(x != tag"bar")
  println(tag"foo" == x)
  println(tag"bar" != x)
}
