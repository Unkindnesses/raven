data Pattern {
  Literal(x)
  Data(xs...)
}

fn match(val, data(`Literal`, pat)) {
  if (pat == val) {
    return []
  } else {
    return nil
  }
}

fn match(data(x, y), data(`Data`, a, b)) {
  if (ismatch(x, a) && ismatch(y, b)) {
    return []
  } else {
    return nil
  }
}

fn ismatch(val, pat) {
  not(isnil(match(val, pat)))
}
