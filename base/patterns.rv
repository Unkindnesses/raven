data Pattern {
  Literal(x)
  Data(xs...)
}

fn match(data(`Literal`, pat), val) {
  if (pat == val) {
    return []
  } else {
    return nil
  }
}

fn match(data(`Data`, a, b), data(x, y)) {
  if (ismatch(a, x) && ismatch(b, y)) {
    return []
  } else {
    return nil
  }
}

fn ismatch(pat, val) {
  not(isnil(match(pat, val)))
}
